(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{182:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"spring-boot配置druid数据库密码加密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot配置druid数据库密码加密","aria-hidden":"true"}},[s._v("#")]),s._v(" spring boot配置druid数据库密码加密")]),s._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("本文主要介绍如何在spring boot中配置druid中数据库密码加密。")]),s._v(" "),t("h2",{attrs:{id:"_1-引入druid的包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-引入druid的包","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 引入druid的包")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.alibaba"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("druid-spring-boot-starter"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1.1.10"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"_2-生成加密的密文和公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成加密的密文和公钥","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 生成加密的密文和公钥")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行以下命令，其中123456是数据库的原始密码")]),s._v("\n$ java -cp druid-1.1.10.jar com.alibaba.druid.filter.config.ConfigTools 123456\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面是执行上面命令生成的内容")]),s._v("\nprivateKey:MIIBVgIBADANBgkqhkiG9w0BAQEFAASCAUAwggE8AgEAAkEAgaN6I6Qjo0kAvHVUwePH/EjW+2wfhcmxkYDKfuE9HMzqfIiTIxGFFwubh8TKgy7GX8Ps1tXpZc3yO4xcYdZBxQIDAQABAkEAgVL160w5CREwnNBnhyyWOkTnwdUw9SQp8b8LQturPWh4I5PlD4PKkdan9PgkYmaHErZk/fm9tIJ044qG7zhRQQIhAM8fKVDZT1oeiOfuPdJU8dyDqi/hGjZyekfKjf3mcIYtAiEAoDtUNtVHbSG26AZB+j74VA5nUSLQykl6rR6mIYwKwPkCIQCzXtU1Az1JWnBOC3DWmmHrCst0M4mz5WgojC5z2AFS8QIhAIo5pDSJWMy0QO14OIKAwAkDQ+2icyuOp92giwB1pvFBAiBzl8jqQ8H1e4UDbQc/pmTcTzqVcA9woUq6WGPDcqo8dw"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\npublicKey:MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAIGjeiOkI6NJALx1VMHjx/xI1vtsH4XJsZGAyn7hPRzM6nyIkyMRhRcLm4fEyoMuxl/D7NbV6WXN8juMXGHWQcUCAwEAAQ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\npassword:RuFWHLrYz6DGVNHh61XJwO3Gf7x0UE92jXjIhn6bJsP4cWFFqn7zXjOgNYbgbDehyOh9nTDR/5jV0SRL9nGSWA"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("其中:")]),s._v(" "),t("ul",[t("li",[s._v("123456是数据库的原始密码。")]),s._v(" "),t("li",[s._v("privateKey:私钥，用不上，用于生成加密的密码")]),s._v(" "),t("li",[s._v("publicKey:公钥")]),s._v(" "),t("li",[s._v("password:加密后的密码")])]),s._v(" "),t("h2",{attrs:{id:"_3-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 3. 配置")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("datasource")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("druid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("driver-class-name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" oracle.jdbc.driver.OracleDriver\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jdbc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("oracle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("thin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("@//127.0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("1521/orcl\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" test\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RuFWHLrYz6DGVNHh61XJwO3Gf7x0UE92jXjIhn6bJsP4cWFFqn7zXjOgNYbgbDehyOh9nTDR/5jV0SRL9nGSWA==\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" config\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("connection-properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" config.decrypt=true;config.decrypt.key=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAIGjeiOkI6NJALx1VMHjx/xI1vtsH4XJsZGAyn7hPRzM6nyIkyMRhRcLm4fEyoMuxl/D7NbV6WXN8juMXGHWQcUCAwEAAQ==\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("采用这种方式并不能保证数据库密码的安全,druid采用了密文+公钥进行解密。")])]),s._v(" "),t("Valine")],1)},[],!1,null,null,null);a.default=e.exports}}]);