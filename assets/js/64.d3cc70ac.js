(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{181:function(a,s,t){"use strict";t.r(s);var e=t(0),n=Object(e.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"elasticsearch安装及配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch安装及配置","aria-hidden":"true"}},[a._v("#")]),a._v(" Elasticsearch安装及配置")]),a._v(" "),t("h2",{attrs:{id:"前置条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前置条件","aria-hidden":"true"}},[a._v("#")]),a._v(" 前置条件")]),a._v(" "),t("p",[a._v("Elasticsearch需要依赖JDK环境，必须先安装JDK。此处使用JDK1.8")]),a._v(" "),t("h2",{attrs:{id:"下载及启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载及启动","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载及启动")]),a._v(" "),t("p",[a._v("从 https://www.elastic.co/downloads/elasticsearch 下载最新稳定的ES。当前下载的版本是6.5.4。")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 下载")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.5.4.tar.gz\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 解压")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zxvf elasticsearch-6.5.4.tar.gz\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动")]),a._v("\n./bin/elasticsearch\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("p",[a._v("常见的启动问题：")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]")]),a._v(" "),t("p",[a._v("这是每个进程最大打开文件太小了，修改/etc/security/limits.conf")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/security/limits.conf\n\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#增加如下二行")]),a._v("\n *               soft    nofile          65536\n *               hard    nofile          65536\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]")]),a._v(" "),t("p",[a._v("修改/etc/sysctl.conf文件，增加配置vm.max_map_count=262144")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/sysctl.conf\nsysctl -p\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])])])]),a._v(" "),t("h2",{attrs:{id:"基本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 基本配置")]),a._v(" "),t("p",[a._v("通过配置conf/elasticsearch.yml进行配置")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置数据和日志路径")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("path.data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /data/elasticsearch/data\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("path.logs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /data/elasticsearch/logs\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 绑定IP，如果需要远程访问的话，需要配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("network.host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 192.168.40.191\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置端口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("http.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9200")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h2",{attrs:{id:"kibana-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana-安装","aria-hidden":"true"}},[a._v("#")]),a._v(" kibana 安装")]),a._v(" "),t("p",[a._v("kibana是ES的可视化和管理工具。"),t("strong",[a._v("需要使用与ES对应的版本")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"下载、解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载、解压","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载、解压")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://artifacts.elastic.co/downloads/kibana/kibana-6.5.4-linux-x86_64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zxvf kibana-6.5.4-linux-x86_64\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"修改config-kibana-yml文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改config-kibana-yml文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改config/kibana.yml文件")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# server.host ")]),a._v("\nserver.host: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"192.168.40.191"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置elasticsearch.url")]),a._v("\nelasticsearch.url: http://192.168.40.191\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h2",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v(".bin/kibana\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("Valine")],1)},[],!1,null,null,null);s.default=n.exports}}]);